---
title: "如何將 Slack 的資料匯到 Rocket.Chat？"
date: 2017-02-08
type: blog
author: 凍仁翔
link: http://note.drx.tw/2017/02/how-to-import-slack-data-into-rocket-chat.html
layout: post
comments: true
---

<a href="https://rocket.chat/" target="_blank">Rocket.Chat</a> 是一套基於 <a href="https://www.meteor.com/install" target="_blank">Meteor.js</a> 開發的開放源始碼 Chat 專案，有著 <a href="https://slack.com/" target="_blank">Slack</a> like 的別名。在建置 Rocket.Chat server 的部份，凍仁曾試著用 <a href="https://rocket.chat/docs/installation/paas-deployments/heroku" target="_blank">Heroku</a> 的方式建置，但只要一匯入 Slack 的資料 (data) 就會炸掉。最後是參考了文件中的 <a href="https://rocket.chat/docs/installation/paas-deployments/aws#7-set-up-docker-containers" target="_blank">AWS / 7. Set up Docker Containers</a> 的方式才可順利匯入資料。<br /><br />回到主題，以下就讓凍仁介紹怎麼用 Slack 的<b>友站搬家工具</b>把資料搬到 Rocket.Chat 上吧！<br /><a name='more'></a><br /><h3>1. 匯出 Slack 資料</h3>1.1. 前往 Slack 網站進行匯出。 <br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://3.bp.blogspot.com/-WBK0ZM6Q7yY/WJiksq9VbrI/AAAAAAAAees/w13IPBkU4JoawBMVJehkU1-m5ACRJJhJwCLcB/s1600/2017-02-07-import-slack-data-to-rocket-chat-1.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="301" src="https://3.bp.blogspot.com/-WBK0ZM6Q7yY/WJiksq9VbrI/AAAAAAAAees/w13IPBkU4JoawBMVJehkU1-m5ACRJJhJwCLcB/s400/2017-02-07-import-slack-data-to-rocket-chat-1.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">▲ Export Data 的網址為 <a href="https://[your_app].slack.com/services/export">https://[your_app].slack.com/services/export</a>。</td></tr></tbody></table><br />1.2. 點選 <b>Start Export</b> 建立匯出資料。<br /><br />1.3. 待作業完成，Slack 會藉由 Email 和 <i>@slackbot</i> 發送匯出完成通知。<br /><br />1.4. 回到 Export Data 頁面，下方會多出下載按鈕，其載完的檔案副檔名為 .zip。<br /><br /><h3>2. 將 Slack 資料匯入 Rocket.Chat</h3>2.1. 回到 Rocket.Chat，並進入管理介面 (Administration)，其網址應為 <a href="https://[your_rocketchat]/admin" target="_blank">https://[your_rocketchat]/admin</a>。<br /><br />2.2. 取消 <b>Allow Domain List</b> 的設置，否則會因無法成功匯入非白名單 Email 的使用者導致匯入失敗。其 <b>Allow Domain List</b> 的設定可以在 <a href="https://[your_rocketchat]/admin/Accounts" target="_blank">https://[your_rocketchat]/admin/Accounts</a> 下方的 Registration 找到。<br /><br />2.3. 回到管裡介面並進入 <b>Import</b>，並點選 Slack 下方的 <b>START</b>。<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://1.bp.blogspot.com/-ybckI9tz6RM/WJikvuj_HjI/AAAAAAAAee4/SquGFYgQ9A4ko4Vu3LN49OcccDsQkfGIgCLcB/s1600/2017-02-07-import-slack-data-to-rocket-chat-2.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="341" src="https://1.bp.blogspot.com/-ybckI9tz6RM/WJikvuj_HjI/AAAAAAAAee4/SquGFYgQ9A4ko4Vu3LN49OcccDsQkfGIgCLcB/s400/2017-02-07-import-slack-data-to-rocket-chat-2.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">▲ Import 的網址為 <a href="https://[your_rocketchat]/admin/import" target="_blank">https://[your_rocketchat]/admin/import</a>。</td></tr></tbody></table><br />2.4. 進到 Import Slack 介面後，選擇先前從 Slack 下載的 zip 檔。<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://4.bp.blogspot.com/-uyc67_vn60k/WJikvZjjdHI/AAAAAAAAeew/2IhO1n3Tmz0PrCB91NwWC44bSzkNogjMACLcB/s1600/2017-02-07-import-slack-data-to-rocket-chat-3.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="341" src="https://4.bp.blogspot.com/-uyc67_vn60k/WJikvZjjdHI/AAAAAAAAeew/2IhO1n3Tmz0PrCB91NwWC44bSzkNogjMACLcB/s400/2017-02-07-import-slack-data-to-rocket-chat-3.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">▲ Import Slack 的網址為 <a href="https://[your_rocketchat]/admin/import/prepare/slack" target="_blank">https://[your_rocketchat]/admin/import/prepare/slack</a>。</td></tr></tbody></table><br />2.5. 解析中，其所需時間將依 server 效能和 Slack 資料大小有所不同。<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://4.bp.blogspot.com/-dhfTiMb7uE8/WJikvu0yACI/AAAAAAAAee0/z7F0mEXsgBsD28UWrju_60J6rzuz6mB-ACLcB/s1600/2017-02-07-import-slack-data-to-rocket-chat-4.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="341" src="https://4.bp.blogspot.com/-dhfTiMb7uE8/WJikvu0yACI/AAAAAAAAee0/z7F0mEXsgBsD28UWrju_60J6rzuz6mB-ACLcB/s400/2017-02-07-import-slack-data-to-rocket-chat-4.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">▲ 解析中的進度條非常不明顯，一開始還以為是當掉了。</td></tr></tbody></table><br />2.6. 解析後，Rocket.Chat 將會列出預的使用者 (Users) 和頻道 (Channels)，若需全部匯入，可直接點選 <b>START IMPORTING</b> 按鈕。<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://2.bp.blogspot.com/-aKsKtMF9Sz0/WJikv6r8RCI/AAAAAAAAee8/ASyFaHTplQYSsl3HX8_YjJp7gIerdkRaQCLcB/s1600/2017-02-07-import-slack-data-to-rocket-chat-5.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="341" src="https://2.bp.blogspot.com/-aKsKtMF9Sz0/WJikv6r8RCI/AAAAAAAAee8/ASyFaHTplQYSsl3HX8_YjJp7gIerdkRaQCLcB/s400/2017-02-07-import-slack-data-to-rocket-chat-5.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">▲ 若想取消已刪除的使用者和已封存的頻道，可藉由上方的按鈕進行操作。</td></tr></tbody></table><br />2.7. 匯入完成！<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://3.bp.blogspot.com/-KoFF1E3iXVs/WJikwfC1hMI/AAAAAAAAefE/cjbul3-C0KMqyh0KhcXt8GLvzD1YuUSwACLcB/s1600/2017-02-07-import-slack-data-to-rocket-chat-6.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="301" src="https://3.bp.blogspot.com/-KoFF1E3iXVs/WJikwfC1hMI/AAAAAAAAefE/cjbul3-C0KMqyh0KhcXt8GLvzD1YuUSwACLcB/s400/2017-02-07-import-slack-data-to-rocket-chat-6.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">▲ 凍仁大概過了一晚才看到這個畫面 ...。</td></tr></tbody></table><br />一開始還很納悶從 Slack 匯出的 zip 怎麼不到 20MB？沒想到匯入完成後用了快 100GB 的儲存 (storage) 空間，相信在匯入的過程中 Rocket.Chat 會另外呼叫 Slack API 並取得相關檔案。<br /><br /><b>若客倌也一直卡在匯入失敗的問題，不妨先把 storage 加大再試試看吧！</b><br /><br /><code class="ref">資料來源： <br /><span style="color: #ffdb00;">★</span> <a href="https://get.slack.help/hc/en-us/articles/201658943-Export-your-team-s-Slack-history" target="_blank">Export your team's Slack history | Slack Help Center</a><br /><span style="color: #ffdb00;">★</span> <a href="https://rocket.chat/docs/administrator-guides/import/slack/" target="_blank">Rocket.Chat Docs | Slack</a><br /></code><br />